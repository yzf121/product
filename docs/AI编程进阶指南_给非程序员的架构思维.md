# AI 编程进阶指南：给非程序员的"架构思维"手册

> **写在前面**：
> 你不需要成为精通语法的程序员，在 AI 时代，你需要升级为**"技术产品经理"**。
> 本指南专为你定制，旨在解决"上下文爆炸"、"由于不懂而不敢不全量投喂"以及"不知道改哪里"的困惑。
> 掌握这套方法论，你将从被动的"许愿者"变为掌控全局的"指挥官"。

---

## 🛑 现状打破：为什么"全量投喂"是死胡同？

你现在的做法：*"把整个项目扔给 AI，说一句话需求，让它自己找、自己改。"*

**为什么这样做行不通？**
1.  **上下文限制**：AI 的记忆是有限的（Token 限制）。一开始能行，项目稍微一大，它就会"遗忘"之前的设定，或者开始胡言乱语。
2.  **注意力分散**：就像你让一个装修工"把房子弄好看点"，他可能去修马桶了；但如果你说"去把客厅墙刷白"，他不仅干得快，还不会出错。
3.  **不可维护**：你不知道它改了哪里，一旦出错，你如果不重头再来，根本没法修。

**✅ 你的新目标：**
不需要懂具体的代码语法（分号写哪里、括号怎么配），但必须懂**"地图"（项目结构）**和**"指挥术"（任务拆解）**。

---

## 🗺️ 第一步：建立心理地图（以你的当前项目为例）

把你的软件项目想象成一家**餐厅**。你不需要会做菜，但你要知道谁负责什么，才能指挥得动。

### 1. 前端 (Frontend) = 餐厅前厅
**负责：** 顾客看得到的、摸得着的（菜单、装修、服务员）。
**你的项目中对应的位置：** `app/` 文件夹

*   **View (XML文件)** = **装修和菜单**。
    *   *作用*：决定页面长什么样（按钮在哪、颜色多蓝、字多大）。
    *   *文件特征*：`.view.xml` 结尾。
    *   *何时找它*：想加个按钮、想改文字位置、想改输入框样式。
    *   *具体路径*：`app/ai-chat-gui/webapp/view/`

*   **Controller (JS文件)** = **服务员**。
    *   *作用*：监听顾客动作（点击了按钮、输入了文字），然后去通知厨房。
    *   *文件特征*：`.controller.js` 结尾。
    *   *何时找它*：点了按钮没反应、想让按钮点击后弹个窗、想把输入框里的字发给后台。
    *   *具体路径*：`app/ai-chat-gui/webapp/controller/`

*   **i18n (Properties文件)** = **多语言菜单**。
    *   *作用*：把界面上的文字变成变量，方便切换中英文。
    *   *何时找它*：想改界面上的某个标题、提示语（比如"Welcome"改成"你好"）。
    *   *具体路径*：`app/ai-chat-gui/webapp/i18n/`

### 2. 后端 (Backend) = 厨房
**负责：** 真正的业务逻辑、处理数据、连接 AI（炒菜、研发菜品）。
**你的项目中对应的位置：** `srv/` 文件夹

*   **Service Definition (CDS文件)** = **点菜窗口**。
    *   *作用*：定义餐厅能提供什么服务（接口）。别人只能通过这里调用厨房。
    *   *何时找它*：想增加一个新的功能接口（比如"清空历史记录"）。
    *   *具体路径*：`srv/chat-service.cds`

*   **Service Implementation (JS文件)** = **厨师**。
    *   *作用*：实际干活的地方。接收前端发来的请求，调用阿里云 AI，处理数据，返回结果。
    *   *何时找它*：AI 回复的逻辑不对、想调整流式响应的速度、想修改调用阿里云的参数。
    *   *具体路径*：`srv/server.js` (在这个项目中，主要逻辑都在这里) 或 `srv/chat-service.js`。

### 3. 配置 (Config) = 餐厅营业执照与守则
**负责：** 告诉系统怎么启动、用哪些端口、密钥是多少。

*   **manifest.json**：前端的总管，规定了先加载哪个页面，路由怎么走。(`app/.../manifest.json`)
*   **.env**：保险柜，放 API Key 的地方。
*   **package.json**：进货清单，列出了项目用了哪些第三方工具。

---

## ⚔️ 第二步：万能需求拆解法 (Spec Coding 核心)

不要直接说大白话需求，尝试用**"三段式"**来描述。只要你按这个格式发给 AI，上下文再小也能精准完成。

**公式：界面 (UI) + 逻辑 (Logic) + 数据 (Data)**

### 举例：你想"加一个清空聊天历史的按钮"

#### ❌ 以前的做法（大白话）：
> "帮我加个清空聊天历史的功能。"
> *(AI 可能会乱改，或者不知道加在哪里)*

#### ✅ 现在的做法（拆解后）：

**1. 界面 (前端 View)**
> "在 `Main.view.xml` 的工具栏（Toolbar）里，添加一个'清空'按钮，图标用垃圾桶（delete）。"

**2. 逻辑 (前端 Controller)**
> "在 `Main.controller.js` 中，添加这个按钮的点击事件 `onClearHistory`。点击后，先弹窗确认，确认后清空 `chat` 模型里的 `messages` 数据，并调用后端接口。"

**3. 数据 (后端 Server)** (如果只清空本地，这一步可能不需要；如果存数据库了，就需要)
> "在 `srv/server.js` 中，添加一个接口处理清空请求。"

---

## 🚀 第三步：操作流程实战 (新工作流)

现在的代码编辑器（如 Cursor, Windsurf, VS Code + Agent）都支持**上下文引用**。这是你最强大的武器。

**场景：我要把聊天框的背景改成浅灰色。**

**步骤 1：定位（问 AI）**
*   **Prompt**: "这也是 AI 唯一需要读全局的时候。不需要让它改，只让它**找**。"
*   **你说**: "我要改聊天气泡的背景颜色，应该看哪个文件？"
*   **AI 回答**: "应该看 `style.css` 或者 `Main.view.xml`。"

**步骤 2：精准投喂（操作）**
*   **操作**: 打开对话框，**只引用** `css/style.css` 这一个文件（不要 Read All）。
*   **你说**: "把 `.chatBubble` 类的背景色改为浅灰色 #f0f0f0。"

**场景：AI 回复总是中断，我想把超时时间改长一点。**

**步骤 1：定位**
*   **你说**: "后端处理 AI 请求超时的逻辑在哪里？"
*   **AI 回答**: "在 `srv/server.js` 中。"

**步骤 2：精准投喂**
*   **操作**: **只引用** `srv/server.js`。
*   **你说**: "找到 `API_TIMEOUT` 常量，把它从 60000 改成 120000。"

---

## 🛡️ 第四步：当报错发生时（排错三板斧）

不要只说"报错了"或者把整个项目扔回去。按照这个顺序提供信息，AI 能秒解：

**1. 现象描述**
*   "点了按钮没反应" 还是 "界面白屏了"？

**2. 浏览器控制台 (前端报错)**
*   **操作**: 在浏览器按 `F12` -> 点击 `Console` (控制台)。
*   **看到红字**: 截图或复制红字发给 AI。
*   *这通常能解决 80% 的前端逻辑问题（如变量未定义）。*

**3. 终端日志 (后端报错)**
*   **操作**: 看 VS Code 下方的 Terminal (终端)。
*   **看到报错**: 复制报错信息发给 AI。
*   *这能解决所有后端崩溃、AI 连接失败的问题。*

---

## 📝 总结：你的"万能 Prompt 模板"

下次提需求，试着填这个空：

> **我想要做的一件事是**：[一句话描述，如：通过回车键发送消息]
> **涉及到的文件应该是**：[利用前面的"地图"知识，如：Main.controller.js] (如果不确定，先问 AI "我想做这个涉及哪些文件")
> **具体要求是**：
> 1. [前端] 在 [文件名] 里监听键盘事件...
> 2. [逻辑] 判断 KeyCode 是 13 (回车) 就调用发送函数...

### 为什么这样能行？
1.  你帮 AI **聚焦**了：它不需要在几百个文件里大海捞针。
2.  你帮 AI **减负**了：上下文只包含相关文件，它的智商会显著提高。
3.  你**掌控**了项目：你知道改动发生在 `Controller` 里，而不是莫名其妙的地方。

---
**记住**：AI 是最强的执行者，而你是唯一的架构师。按照这个文档去拆解你的下一个需求，你会发现一切都变得清晰可控。

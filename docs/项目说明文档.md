# AI åŠ©æ‰‹å¹³å° - é¡¹ç›®è¯´æ˜æ–‡æ¡£

> **ç‰ˆæœ¬**: v1.4.3  
> **æ›´æ–°æ—¥æœŸ**: 2025å¹´1æœˆ12æ—¥  
> **é¡¹ç›®åç§°**: abap-clean-core-ai-fiori-new  
> **æŠ€æœ¯æ ˆ**: SAP CAP (Node.js) + SAP UI5 Freestyle + é˜¿é‡Œäº‘ç™¾ç‚¼ AI

---

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#1-é¡¹ç›®æ¦‚è¿°)
2. [æŠ€æœ¯æ¶æ„](#2-æŠ€æœ¯æ¶æ„)
3. [ç›®å½•ç»“æ„](#3-ç›®å½•ç»“æ„)
4. [æ ¸å¿ƒåŠŸèƒ½æ¨¡å—](#4-æ ¸å¿ƒåŠŸèƒ½æ¨¡å—)
5. [åç«¯æœåŠ¡è¯´æ˜](#5-åç«¯æœåŠ¡è¯´æ˜)
6. [å‰ç«¯åº”ç”¨è¯´æ˜](#6-å‰ç«¯åº”ç”¨è¯´æ˜)
7. [é…ç½®æ–‡ä»¶è¯´æ˜](#7-é…ç½®æ–‡ä»¶è¯´æ˜)
8. [éƒ¨ç½²æŒ‡å—](#8-éƒ¨ç½²æŒ‡å—)
9. [æœ¬åœ°å¼€å‘æŒ‡å—](#9-æœ¬åœ°å¼€å‘æŒ‡å—)
10. [API æ¥å£æ–‡æ¡£](#10-api-æ¥å£æ–‡æ¡£)
11. [å›½é™…åŒ–æ”¯æŒ](#11-å›½é™…åŒ–æ”¯æŒ)
12. [å®‰å…¨é…ç½®](#12-å®‰å…¨é…ç½®)
13. [å¸¸è§é—®é¢˜](#13-å¸¸è§é—®é¢˜)

---

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®ç®€ä»‹

**AI åŠ©æ‰‹å¹³å°**æ˜¯ä¸€ä¸ªåŸºäº **SAP CAP (Cloud Application Programming)** æ¡†æ¶å’Œ **SAP UI5 Freestyle** å‰ç«¯æŠ€æœ¯æ„å»ºçš„ä¼ä¸šçº§ AI æ™ºèƒ½åŠ©æ‰‹åº”ç”¨ã€‚è¯¥å¹³å°é›†æˆäº†**é˜¿é‡Œäº‘ç™¾ç‚¼ï¼ˆDashScopeï¼‰** å¤§è¯­è¨€æ¨¡å‹ APIï¼Œä¸º SAP å¼€å‘äººå‘˜æä¾›å¤šç§ AI è¾…åŠ©å·¥å…·ï¼Œå¸®åŠ©æå‡å¼€å‘æ•ˆç‡ã€‚

### 1.2 æ ¸å¿ƒèƒ½åŠ›

| åŠŸèƒ½æ¨¡å— | æè¿° |
|---------|------|
| **ABAP Clean Core åŠ©æ‰‹** | å¸®åŠ©å°†ä¼ ç»Ÿ ABAP ä»£ç é‡æ„ä¸ºäº‘å°±ç»ªï¼ˆCloud-Readyï¼‰ä»£ç  |
| **CPI é›†æˆåŠ©æ‰‹** | SAP CPI Integration Suite å¼€å‘æŒ‡å¯¼ |
| **åŠŸèƒ½æ–‡æ¡£ç”Ÿæˆ** | è‡ªåŠ¨ç”ŸæˆåŠŸèƒ½è§„æ ¼è¯´æ˜æ–‡æ¡£ |
| **æŠ€æœ¯æ–‡æ¡£ç”Ÿæˆ** | è‡ªåŠ¨ç”ŸæˆæŠ€æœ¯è®¾è®¡æ–‡æ¡£ |
| **ä»£ç å®¡æŸ¥åŠ©æ‰‹** | æ™ºèƒ½ä»£ç è´¨é‡æ£€æŸ¥ |
| **å•å…ƒæµ‹è¯•ç”Ÿæˆ** | è‡ªåŠ¨ç”Ÿæˆ ABAP å•å…ƒæµ‹è¯•ä»£ç  |
| **æµç¨‹å›¾ç”Ÿæˆ** | AI é©±åŠ¨çš„ Mermaid æµç¨‹å›¾/æ¶æ„å›¾ç”Ÿæˆå·¥å…· |
| **æ–‡ä»¶ä¸Šä¼ åˆ†æ** | ä¸Šä¼  PDFã€Wordã€Excel ç­‰æ–‡æ¡£ä¾› AI åˆ†æ |

### 1.3 æŠ€æœ¯ç‰¹æ€§

- âœ… **æµå¼å“åº” (SSE)**: æ”¯æŒå®æ—¶æµå¼ AI å“åº”ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
- âœ… **å¤š AI åŠ©æ‰‹åˆ‡æ¢**: å•ä¸€å¹³å°æ”¯æŒå¤šä¸ªä¸“ä¸šé¢†åŸŸ AI åŠ©æ‰‹
- âœ… **ä¼šè¯ç®¡ç†**: æ”¯æŒå¤šè½®å¯¹è¯ï¼Œæ™ºèƒ½ä¼šè¯å­˜å‚¨ç­–ç•¥
- âœ… **æ–‡ä»¶ä¸Šä¼ **: æ”¯æŒä¸Šä¼  PDFã€Wordã€Excel ç­‰æ–‡æ¡£ä¾› AI åˆ†æ
- âœ… **Markdown æ¸²æŸ“**: æ”¯æŒå¯Œæ–‡æœ¬ã€ä»£ç é«˜äº®æ˜¾ç¤º
- âœ… **å›½é™…åŒ–**: æ”¯æŒä¸­æ–‡ï¼ˆzh_CNï¼‰å’Œè‹±æ–‡ï¼ˆenï¼‰
- âœ… **å“åº”å¼è®¾è®¡**: é€‚é…æ¡Œé¢ã€å¹³æ¿ã€æ‰‹æœºå¤šç«¯è®¾å¤‡
- âœ… **SAP BTP éƒ¨ç½²**: æ”¯æŒä¸€é”®éƒ¨ç½²åˆ° SAP Business Technology Platform
- âœ… **ç«¯å£è‡ªåŠ¨åˆ‡æ¢**: å¼€å‘æ—¶è‡ªåŠ¨æ£€æµ‹å¹¶ä½¿ç”¨å¯ç”¨ç«¯å£

---

## 2. æŠ€æœ¯æ¶æ„

### 2.1 æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SAP BTP / Cloud Foundry                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   HTML5 Repo    â”‚  â”‚     XSUAA       â”‚  â”‚   Destination   â”‚  â”‚
â”‚  â”‚  (å‰ç«¯æ‰˜ç®¡)      â”‚  â”‚   (è®¤è¯æœåŠ¡)     â”‚  â”‚    (è·¯ç”±é…ç½®)    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                    â”‚                    â”‚           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     HTML5 Runtime / Launchpad (Work Zone)                  â”‚  â”‚
â”‚  â”‚          (HTML5 è¿è¡Œæ—¶è·¯ç”± + è®¤è¯å¤„ç†)                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   CAP Node.js Backend                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ chat-serviceâ”‚  â”‚        server.js (è‡ªå®šä¹‰)            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   (CDS)     â”‚  â”‚  - æµå¼å“åº”ç«¯ç‚¹ /api/chat/stream     â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  - ç«¯å£è‡ªåŠ¨åˆ‡æ¢                       â”‚  â”‚  â”‚
â”‚  â”‚                   â”‚  - AI ç±»å‹è·¯ç”±                        â”‚  â”‚  â”‚
â”‚  â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚ HTTPS
                               â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚     é˜¿é‡Œäº‘ç™¾ç‚¼ (DashScope) API       â”‚
              â”‚     https://dashscope.aliyuncs.com  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æŠ€æœ¯æ ˆè¯¦æƒ…

| å±‚çº§ | æŠ€æœ¯ | ç‰ˆæœ¬è¦æ±‚ |
|-----|------|---------|
| **è¿è¡Œæ—¶** | Node.js | >= 18.0.0 |
| **åç«¯æ¡†æ¶** | @sap/cds | ^9 |
| **å‰ç«¯æ¡†æ¶** | SAP UI5 | >= 1.120.0 |
| **UI åº“** | sap.m, sap.f, sap.ui.layout | - |
| **AI æœåŠ¡** | é˜¿é‡Œäº‘ç™¾ç‚¼ DashScope | - |
| **æ„å»ºå·¥å…·** | MTA Build Tool (mbt) | ^1.2.29 |
| **å‰ç«¯æ„å»º** | @ui5/cli | ^4.0.33 |

### 2.3 æ ¸å¿ƒä¾èµ–

**ç”Ÿäº§ä¾èµ– (dependencies):**
```json
{
  "@sap/cds": "^9",
  "@sap/xssec": "^4",
  "dotenv": "^16.3.1",
  "express": "^4",
  "multer": "^1.4.5-lts.1",
  "form-data": "^4.0.0",
  "@alicloud/bailian20231229": "^1.0.0",
  "@alicloud/openapi-client": "^0.4.0",
  "@alicloud/tea-util": "^1.4.0"
}
```

**å¼€å‘ä¾èµ– (devDependencies):**
```json
{
  "@cap-js/sqlite": "^2.1.2",
  "@sap/cds-dk": "^9",
  "cds-plugin-ui5": "^0.13.0",
  "mbt": "^1.2.29",
  "rimraf": "^5.0.5"
}
```

---

## 3. ç›®å½•ç»“æ„

```
abap-clean-core-ai-fiori-new/
â”œâ”€â”€ ğŸ“ app/                          # å‰ç«¯åº”ç”¨ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“ ai-chat-gui/              # AI èŠå¤© GUI åº”ç”¨
â”‚   â”‚   â”œâ”€â”€ ğŸ“ webapp/               # UI5 Web åº”ç”¨æºç 
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ controller/       # MVC æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ App.controller.js
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Home.controller.js
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Main.controller.js
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Diagram.controller.js
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ view/             # XML è§†å›¾
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ App.view.xml
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Home.view.xml
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Main.view.xml
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Diagram.view.xml
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DrawioDialog.fragment.xml
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ css/              # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ style.css
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ highlight-github-dark.min.css
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ i18n/             # å›½é™…åŒ–èµ„æº
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ i18n.properties         # é»˜è®¤ï¼ˆè‹±æ–‡ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ i18n_en.properties      # è‹±æ–‡
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ i18n_zh_CN.properties   # ä¸­æ–‡
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ images/           # å›¾ç‰‡èµ„æº
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ lib/              # ç¬¬ä¸‰æ–¹åº“
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ model/            # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ Component.js         # UI5 ç»„ä»¶å…¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ manifest.json        # åº”ç”¨æè¿°ç¬¦
â”‚   â”‚   â”‚   â””â”€â”€ index.html           # å…¥å£ HTML
â”‚   â”‚   â”œâ”€â”€ package.json             # å‰ç«¯åŒ…é…ç½®
â”‚   â”‚   â”œâ”€â”€ ui5.yaml                 # UI5 é…ç½®
â”‚   â”‚   â”œâ”€â”€ ui5-deploy.yaml          # éƒ¨ç½²æ—¶ UI5 é…ç½®
â”‚   â”‚   â”œâ”€â”€ xs-app.json              # åº”ç”¨è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ annotations.cds          # CDS æ³¨è§£
â”‚   â””â”€â”€ services.cds                 # æœåŠ¡å¼•ç”¨
â”‚
â”œâ”€â”€ ğŸ“ db/                           # æ•°æ®åº“å±‚
â”‚   â”œâ”€â”€ schema.cds                   # æ•°æ®æ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ ğŸ“ data/                     # åˆå§‹æ•°æ®
â”‚   â”œâ”€â”€ ğŸ“ src/                      # æ•°æ®åº“æºç 
â”‚   â””â”€â”€ undeploy.json                # å¸è½½é…ç½®
â”‚
â”œâ”€â”€ ğŸ“ srv/                          # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ chat-service.cds             # èŠå¤©æœåŠ¡ CDS å®šä¹‰
â”‚   â”œâ”€â”€ chat-service.js              # èŠå¤©æœåŠ¡å®ç°ï¼ˆéæµå¼ï¼‰
â”‚   â””â”€â”€ server.js                    # è‡ªå®šä¹‰æœåŠ¡å™¨ï¼ˆæµå¼å“åº”ï¼‰
â”‚
â”œâ”€â”€ ğŸ“ docs/                         # æ–‡æ¡£ç›®å½•
â”‚   â””â”€â”€ é¡¹ç›®è¯´æ˜æ–‡æ¡£.md               # æœ¬æ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸ“ .vscode/                      # VS Code é…ç½®
â”‚
â”œâ”€â”€ .cdsrc.json                      # CDS è¿è¡Œæ—¶é…ç½®
â”œâ”€â”€ .env                             # ç¯å¢ƒå˜é‡ï¼ˆæ•æ„Ÿä¿¡æ¯ï¼Œä¸æäº¤ï¼‰
â”œâ”€â”€ .gitignore                       # Git å¿½ç•¥é…ç½®
â”œâ”€â”€ eslint.config.mjs                # ESLint é…ç½®
â”œâ”€â”€ mta.yaml                         # MTA éƒ¨ç½²æè¿°ç¬¦
â”œâ”€â”€ package.json                     # é¡¹ç›®é…ç½®å…¥å£
â”œâ”€â”€ package-lock.json                # ä¾èµ–é”å®š
â”œâ”€â”€ README.md                        # å¿«é€Ÿå…¥é—¨æŒ‡å—
â””â”€â”€ xs-security.json                 # XSUAA å®‰å…¨é…ç½®
```

---

## 4. æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 4.1 é¦–é¡µ (Home)

**è·¯ç”±**: `/` æˆ– `#/`

é¦–é¡µé‡‡ç”¨ **SAP Fiori Launchpad** é£æ ¼è®¾è®¡ï¼Œå±•ç¤ºæ‰€æœ‰å¯ç”¨çš„ AI åŠ©æ‰‹å’Œå·¥å…·ç£è´´ã€‚

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- æ¬¢è¿åŒºåŸŸå±•ç¤ºå¹³å°ä»‹ç»
- AI åŠ©æ‰‹åˆ†ç±»åŒºåŸŸï¼ˆ4 ä¸ª AI åŠ©æ‰‹ç£è´´ï¼šABAP/CPI/åŠŸèƒ½æ–‡æ¡£/æŠ€æœ¯æ–‡æ¡£ï¼‰
- å·¥å…·åˆ†ç±»åŒºåŸŸï¼ˆæµç¨‹å›¾ç”Ÿæˆ + ä»£ç å®¡æŸ¥ + å•å…ƒæµ‹è¯•ï¼‰
- è®¾ç½®æŒ‰é’®ï¼ˆæ˜¾ç¤ºå…³äºä¿¡æ¯ï¼‰

**å¯¹åº”æ–‡ä»¶ï¼š**
- è§†å›¾ï¼š`app/ai-chat-gui/webapp/view/Home.view.xml`
- æ§åˆ¶å™¨ï¼š`app/ai-chat-gui/webapp/controller/Home.controller.js`

### 4.2 èŠå¤©é¡µé¢ (Main)

**è·¯ç”±**: `#/chat/{aiType}`

ä¸»è¦çš„ AI å¯¹è¯äº¤äº’ç•Œé¢ï¼Œé‡‡ç”¨ **FlexibleColumnLayout** åŒæ å¸ƒå±€ã€‚

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- **å·¦ä¾§è¾¹æ **ï¼š
  - å¯¹è¯å†å²åˆ—è¡¨
  - æ–°å»ºå¯¹è¯æŒ‰é’®
  - ç¼–è¾‘/åˆ é™¤å¯¹è¯æ“ä½œ
- **å³ä¾§ä¸»åŒºåŸŸ**ï¼š
  - æ¶ˆæ¯åˆ—è¡¨ï¼ˆæ”¯æŒ Markdown æ¸²æŸ“ï¼‰
  - ä»£ç é«˜äº®æ˜¾ç¤º
  - å¤åˆ¶ä»£ç åŠŸèƒ½
  - æµå¼æ‰“å­—æœºæ•ˆæœ
  - æ¶ˆæ¯è¾“å…¥æ¡†ï¼ˆæ”¯æŒ Shift+Enter æ¢è¡Œï¼‰
- **æ™ºèƒ½ä¼šè¯ç®¡ç†**ï¼š
  - ä¼˜å…ˆä½¿ç”¨ `session_id`ï¼ˆäº‘ç«¯å­˜å‚¨ï¼ŒèŠ‚çœ tokenï¼‰
  - è¶…è¿‡ 50 è½®æˆ– 1 å°æ—¶åè‡ªåŠ¨é™çº§åˆ° `messages` æ¨¡å¼
  - localStorage æœ¬åœ°æŒä¹…åŒ–

**å¯¹åº”æ–‡ä»¶ï¼š**
- è§†å›¾ï¼š`app/ai-chat-gui/webapp/view/Main.view.xml`
- æ§åˆ¶å™¨ï¼š`app/ai-chat-gui/webapp/controller/Main.controller.js`

### 4.3 æµç¨‹å›¾ç”Ÿæˆé¡µé¢ (Diagram)

**è·¯ç”±**: `#/diagram`

AI é©±åŠ¨çš„ Mermaid æµç¨‹å›¾ç”Ÿæˆå·¥å…·ã€‚

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- **è¾“å…¥åŒºåŸŸ**ï¼š
  - æè¿°è¾“å…¥æ¡†
  - ç”Ÿæˆ/é‡æ–°ç”ŸæˆæŒ‰é’®
  - Mermaid æºç ç¼–è¾‘å™¨
  - æ¸²æŸ“/å¤åˆ¶æŒ‰é’®
  - è‡ªåŠ¨ä¿®å¤æ ¼å¼åŠŸèƒ½
- **é¢„è§ˆåŒºåŸŸ**ï¼š
  - å®æ—¶ Mermaid æ¸²æŸ“
  - ç¼©æ”¾æ§åˆ¶ï¼ˆæ”¾å¤§/ç¼©å°/é‡ç½®ï¼‰
  - æ‹–æ‹½å¹³ç§»æ”¯æŒ
  - é¢„è§ˆæ¨¡å¼/ä»£ç æ¨¡å¼åˆ‡æ¢
- **å¯¼å‡ºåŠŸèƒ½**ï¼š
  - ä¸‹è½½ PNG
  - ä¸‹è½½ SVG
  - å¤åˆ¶å›¾ç‰‡åˆ°å‰ªè´´æ¿
  - åœ¨ Draw.io ä¸­ç¼–è¾‘

**å¯¹åº”æ–‡ä»¶ï¼š**
- è§†å›¾ï¼š`app/ai-chat-gui/webapp/view/Diagram.view.xml`
- æ§åˆ¶å™¨ï¼š`app/ai-chat-gui/webapp/controller/Diagram.controller.js`
- ç‰‡æ®µï¼š`app/ai-chat-gui/webapp/view/DrawioDialog.fragment.xml`

---

## 5. åç«¯æœåŠ¡è¯´æ˜

### 5.1 æœåŠ¡æ¶æ„

åç«¯æœåŠ¡åŸºäº SAP CAP æ¡†æ¶ï¼ŒåŒ…å«ä¸¤éƒ¨åˆ†ï¼š

1. **CDS æœåŠ¡å®šä¹‰** (`srv/chat-service.cds`)
2. **è‡ªå®šä¹‰æœåŠ¡å™¨** (`srv/server.js`)

### 5.2 CDS æœåŠ¡å®šä¹‰

```cds
// srv/chat-service.cds
service ChatService @(path: '/api/chat') {
    action sendMessage(message: String, sessionId: String) returns String;
}
```

è¿™æ˜¯ä¸€ä¸ªå¤‡ç”¨çš„éæµå¼æ¶ˆæ¯å‘é€æ¥å£ã€‚

### 5.3 è‡ªå®šä¹‰æœåŠ¡å™¨ (server.js)

`server.js` æ˜¯é¡¹ç›®çš„æ ¸å¿ƒåç«¯æ–‡ä»¶ï¼Œæä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š

#### 5.3.1 AI åŠ©æ‰‹ç±»å‹æ˜ å°„

```javascript
const AI_APP_ID_MAP = {
    'abap-clean-core': process.env.DASHSCOPE_APP_ID_ABAP || process.env.DASHSCOPE_APP_ID,
    'cpi': process.env.DASHSCOPE_APP_ID_CPI,
    'func-doc': process.env.DASHSCOPE_APP_ID_FUNC_DOC,
    'tech-doc': process.env.DASHSCOPE_APP_ID_TECH_DOC,
    'code-review': process.env.DASHSCOPE_APP_ID_CODE_REVIEW,
    'unit-test': process.env.DASHSCOPE_APP_ID_UNIT_TEST,
    'diagram': process.env.DASHSCOPE_APP_ID_DIAGRAM
};
```

æ¯ä¸ª AI åŠ©æ‰‹å¯¹åº”é˜¿é‡Œäº‘ç™¾ç‚¼ä¸­çš„ä¸åŒåº”ç”¨ IDï¼Œå®ç°ä¸“ä¸šåŒ–åˆ†å·¥ã€‚
æœªé…ç½®çš„ `aiType` ä¼šå›é€€åˆ°é»˜è®¤åº”ç”¨ IDï¼ˆ`DASHSCOPE_APP_ID` æˆ– `DASHSCOPE_APP_ID_ABAP`ï¼‰ã€‚

#### 5.3.2 æµå¼å“åº”ç«¯ç‚¹

**ç«¯ç‚¹**: `POST /api/chat/stream`

**è¯·æ±‚ä½“**:
```json
{
    "message": "ç”¨æˆ·è¾“å…¥çš„æ¶ˆæ¯",
    "sessionId": "ä¼šè¯IDï¼ˆå¯é€‰ï¼‰",
    "aiType": "AIç±»å‹ï¼ˆå¯é€‰ï¼Œé»˜è®¤ abap-clean-coreï¼‰",
    "messages": [{"role": "user/assistant", "content": "..."}],
    "sessionInfo": {
        "createdAt": "2025-01-01T00:00:00Z",
        "roundCount": 5
    },
    "sessionFileIds": ["file_session_xxx"]
}
```

**å“åº”**: Server-Sent Events (SSE) æ ¼å¼

```
data: {"text": "éƒ¨åˆ†å“åº”å†…å®¹", "sessionId": "xxx"}

data: {"text": "ç»§ç»­å“åº”...", "sessionId": "xxx"}

data: [DONE]
```

#### 5.3.3 ä¼šè¯ç®¡ç†ç­–ç•¥

```javascript
const SESSION_CONFIG = {
    MAX_ROUNDS: 50,        // ç™¾ç‚¼ API é™åˆ¶ï¼šæœ€å¤š 50 è½®
    EXPIRE_HOURS: 1,       // ç™¾ç‚¼ API é™åˆ¶ï¼š1 å°æ—¶è¿‡æœŸ
    FALLBACK_ROUNDS: 10    // é™çº§æ—¶ä½¿ç”¨çš„å†å²è½®æ•°
};
```

**æ··åˆç­–ç•¥**ï¼š
1. ä¼˜å…ˆä½¿ç”¨ `session_id`ï¼ˆäº‘ç«¯å­˜å‚¨ä¸Šä¸‹æ–‡ï¼ŒèŠ‚çœ tokenï¼‰
2. è¶…è¿‡ 50 è½®æˆ– 1 å°æ—¶åï¼Œè‡ªåŠ¨é™çº§åˆ° `messages` æ¨¡å¼ï¼ˆå‘é€æœ¬åœ°å†å²ï¼‰
3. æ–°å¯¹è¯æ—¶åªå‘é€å½“å‰æ¶ˆæ¯

#### 5.3.4 ç«¯å£è‡ªåŠ¨åˆ‡æ¢

```javascript
async function findAvailablePort(startPort, maxAttempts = 10) {
    for (let i = 0; i < maxAttempts; i++) {
        const port = startPort + i;
        const available = await isPortAvailable(port);
        if (available) return port;
    }
    throw new Error('æ— æ³•æ‰¾åˆ°å¯ç”¨ç«¯å£');
}
```

å¼€å‘æ—¶å¦‚æœé»˜è®¤ç«¯å£ 4004 è¢«å ç”¨ï¼Œä¼šè‡ªåŠ¨å°è¯• 4005ã€4006 ç­‰åç»­ç«¯å£ã€‚

---

## 6. å‰ç«¯åº”ç”¨è¯´æ˜

### 6.1 åº”ç”¨ç»„ä»¶ (Component.js)

`Component.js` æ˜¯ UI5 åº”ç”¨çš„å…¥å£ç»„ä»¶ï¼Œè´Ÿè´£ï¼š

- åˆå§‹åŒ–è·¯ç”±
- ä» localStorage åŠ è½½/ä¿å­˜å¯¹è¯å†å²
- ç®¡ç†å…¨å±€å¯¹è¯åˆ—è¡¨
- å­˜å‚¨ç©ºé—´æº¢å‡ºå¤„ç†

**å¯¹è¯å­˜å‚¨é™åˆ¶**ï¼š
```javascript
var STORAGE_KEY = "ai_chat_conversations";
var MAX_CONVERSATIONS = 100;
```

### 6.2 è·¯ç”±é…ç½®

åœ¨ `manifest.json` ä¸­å®šä¹‰çš„è·¯ç”±ï¼š

| è·¯ç”±åç§° | æ¨¡å¼ | ç›®æ ‡è§†å›¾ |
|---------|------|---------|
| `home` | `""` | Home.view.xml |
| `chat` | `"chat/{aiType}"` | Main.view.xml |
| `diagram` | `"diagram"` | Diagram.view.xml |

### 6.3 æ•°æ®æ¨¡å‹

**i18n æ¨¡å‹**ï¼šå›½é™…åŒ–èµ„æºç»‘å®š

**chat æ¨¡å‹**ï¼š
```json
{
    "messages": [],
    "conversations": [],
    "currentConversationId": null,
    "attachments": [],
    "inputValue": "",
    "isLoading": false,
    "sidebarExpanded": true
}
```

### 6.4 æ ·å¼ç³»ç»Ÿ

ä¸»æ ·å¼æ–‡ä»¶ `css/style.css` åŒ…å«ï¼š

- é¦–é¡µ Launchpad æ ·å¼
- ç£è´´åŠ¨ç”»æ•ˆæœ
- èŠå¤©ç•Œé¢å¸ƒå±€
- æ¶ˆæ¯æ°”æ³¡æ ·å¼
- Markdown æ¸²æŸ“æ ·å¼
- ä»£ç é«˜äº®æ ·å¼
- æµç¨‹å›¾é¡µé¢æ ·å¼
- å“åº”å¼é€‚é…

### 6.5 ç¬¬ä¸‰æ–¹åº“é›†æˆ

- **marked.js**: Markdown è§£æ
- **highlight.js**: ä»£ç è¯­æ³•é«˜äº®
- **mermaid.js**: æµç¨‹å›¾æ¸²æŸ“
- **Draw.io Embed**: å›¾è¡¨ç¼–è¾‘

---

## 7. é…ç½®æ–‡ä»¶è¯´æ˜

### 7.1 ç¯å¢ƒå˜é‡ (.env)

åˆ›å»º `.env` æ–‡ä»¶ï¼ˆå‚è€ƒä¸‹æ–‡ç¤ºä¾‹ï¼‰ï¼š

```bash
# é˜¿é‡Œäº‘ç™¾ç‚¼ API é…ç½®
DASHSCOPE_API_KEY=sk-xxxxxxxxxxxxxxxx

# å„ AI åŠ©æ‰‹çš„åº”ç”¨ ID
DASHSCOPE_APP_ID=xxxxxxxx              # é»˜è®¤åº”ç”¨ ID
DASHSCOPE_APP_ID_ABAP=xxxxxxxx         # ABAP Clean Core
DASHSCOPE_APP_ID_CPI=xxxxxxxx          # CPI Integration
DASHSCOPE_APP_ID_FUNC_DOC=xxxxxxxx     # åŠŸèƒ½æ–‡æ¡£
DASHSCOPE_APP_ID_TECH_DOC=xxxxxxxx     # æŠ€æœ¯æ–‡æ¡£
DASHSCOPE_APP_ID_CODE_REVIEW=xxxxxxxx  # ä»£ç å®¡æŸ¥
DASHSCOPE_APP_ID_UNIT_TEST=xxxxxxxx    # å•å…ƒæµ‹è¯•
DASHSCOPE_APP_ID_DIAGRAM=xxxxxxxx      # æµç¨‹å›¾ç”Ÿæˆ

# ç™¾ç‚¼ OpenAPI é…ç½®ï¼ˆç”¨äºæ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œå¯é€‰ï¼‰
BAILIAN_ACCESS_KEY_ID=LTAI5txxxxxxxxxx      # é˜¿é‡Œäº‘ RAM AccessKey ID
BAILIAN_ACCESS_KEY_SECRET=xxxxxxxxxx        # é˜¿é‡Œäº‘ RAM AccessKey Secret
BAILIAN_WORKSPACE_ID=llm-njsp72bv281ofywg   # ç™¾ç‚¼ä¸šåŠ¡ç©ºé—´ ID
```

> âš ï¸ **å®‰å…¨æç¤º**: `.env` æ–‡ä»¶å·²æ·»åŠ åˆ° `.gitignore`ï¼Œåˆ‡å‹¿æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ï¼
>  
> ğŸ“ **é…ç½®è¯´æ˜**:  
> - æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ä½¿ç”¨ **RAM AccessKey**ï¼ˆBAILIAN_ACCESS_KEY_ID/SECRETï¼‰ï¼Œè€Œé DashScope API Key  
> - åœ¨ server.js ä»£ç ä¸­ï¼Œè¿™äº›å˜é‡åˆ†åˆ«ç®€å†™ä¸º BAILIAN_AK å’Œ BAILIAN_SK  
> - æ–‡ä»¶å’Œåº”ç”¨å¿…é¡»åœ¨åŒä¸€ä¸šåŠ¡ç©ºé—´ï¼ˆBAILIAN_WORKSPACE_IDï¼‰ä¸‹

### 7.2 CDS é…ç½® (.cdsrc.json)

```json
{
    "requires": {
        "db": {
            "kind": "sql"
        }
    },
    "server": {
        "impl": "./srv/server.js"
    }
}
```

- `db.kind`: æ•°æ®åº“ç±»å‹ï¼ˆå¼€å‘æ—¶ä½¿ç”¨ SQLiteï¼‰
- `server.impl`: æŒ‡å®šè‡ªå®šä¹‰æœåŠ¡å™¨å…¥å£

### 7.3 MTA éƒ¨ç½²é…ç½® (mta.yaml)

MTA (Multi-Target Application) æè¿°ç¬¦å®šä¹‰äº†äº‘ç«¯éƒ¨ç½²ç»“æ„ï¼š

**æ¨¡å— (Modules)**:
- `abap-clean-core-ai-fiori-new-srv`: Node.js åç«¯æœåŠ¡
- `comaiassistantaichatapp`: HTML5 å‰ç«¯åº”ç”¨
- `abap-clean-core-ai-fiori-new-app-deployer`: HTML5 åº”ç”¨éƒ¨ç½²å™¨
- `abap-clean-core-ai-fiori-new-destination-content`: Destination é…ç½®

**èµ„æº (Resources)**:
- `abap-clean-core-ai-fiori-new-auth`: XSUAA è®¤è¯æœåŠ¡
- `abap-clean-core-ai-fiori-new-destination`: Destination æœåŠ¡
- `abap-clean-core-ai-fiori-new-html5-repo-host`: HTML5 åº”ç”¨ä»“åº“

### 7.4 å®‰å…¨é…ç½® (xs-security.json)

```json
{
    "xsappname": "abap-clean-core-ai-fiori-new",
    "tenant-mode": "dedicated",
    "scopes": [
        {
            "name": "$XSAPPNAME.user",
            "description": "User access"
        }
    ],
    "attributes": [],
    "role-templates": [
        {
            "name": "User",
            "description": "User role",
            "scope-references": [
                "$XSAPPNAME.user"
            ]
        }
    ],
    "role-collections": [
        {
            "name": "AIChat_User",
            "description": "AI Chat Application User",
            "role-template-references": [
                "$XSAPPNAME.User"
            ]
        }
    ],
    "oauth2-configuration": {
        "redirect-uris": [
            "https://*.cfapps.*.hana.ondemand.com/**",
            "https://*.launchpad.cfapps.*.hana.ondemand.com/**",
            "https://*.cfapps.*.platform.sapcloud.cn/**",
            "https://*.launchpad.cfapps.*.platform.sapcloud.cn/**"
        ]
    }
}

éƒ¨ç½²åéœ€è¦å°† `AIChat_User` è§’è‰²é›†åˆåˆ†é…ç»™ç”¨æˆ·ã€‚

### 7.5 åº”ç”¨è·¯ç”±é…ç½® (xs-app.json)

```json
{
    "routes": [
        {
            "source": "^/api/(.*)$",
            "target": "/api/$1",
            "authenticationType": "xsuaa",
            "destination": "srv-api"
        },
        // ...
    ]
}
```

å®šä¹‰äº†å‰ç«¯è¯·æ±‚åˆ°åç«¯æœåŠ¡çš„è·¯ç”±è§„åˆ™ã€‚

---

## 8. éƒ¨ç½²æŒ‡å—

### 8.1 å‰ç½®æ¡ä»¶

1. å®‰è£… Cloud Foundry CLI
2. å®‰è£… MTA Build Tool: `npm install -g mbt`
3. ç™»å½• SAP BTP Cloud Foundry:
   ```bash
   cf login -a <API_ENDPOINT>
   ```

### 8.2 æ„å»º

```bash
# æ¸…ç†æ—§æ„å»ºäº§ç‰©å¹¶æ„å»º MTA åŒ…
npm run build
```

è¿™å°†ç”Ÿæˆ `mta_archives/archive.mtar` æ–‡ä»¶ã€‚

### 8.3 éƒ¨ç½²

```bash
# éƒ¨ç½²åˆ° Cloud Foundry
npm run deploy
```

æˆ–ç›´æ¥ä½¿ç”¨ï¼š
```bash
cf deploy mta_archives/archive.mtar --retries 1
```

### 8.4 é…ç½® Destination

éƒ¨ç½²åï¼Œéœ€è¦åœ¨ BTP Cockpit ä¸­é…ç½®æŒ‡å‘é˜¿é‡Œäº‘ç™¾ç‚¼ API çš„ Destinationï¼ˆå¦‚éœ€ï¼‰ã€‚

### 8.5 åˆ†é…è§’è‰²

åœ¨ BTP Cockpit > Security > Role Collections ä¸­ï¼š
1. æ‰¾åˆ° `AIChat_User` è§’è‰²é›†åˆ
2. æ·»åŠ éœ€è¦è®¿é—®åº”ç”¨çš„ç”¨æˆ·

### 8.6 å¸è½½

```bash
npm run undeploy
```

---

## 9. æœ¬åœ°å¼€å‘æŒ‡å—

### 9.1 ç¯å¢ƒå‡†å¤‡

```bash
# 1. å®‰è£…ä¾èµ–
npm install

# 2. é…ç½®ç¯å¢ƒå˜é‡
# æ–°å»º .env å¹¶å¡«å†™ API å¯†é’¥ï¼ˆå‚è€ƒä¸‹æ–‡ç¤ºä¾‹ï¼‰
# Windows: type nul > .env
# macOS/Linux: touch .env
```

### 9.2 å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# å¯åŠ¨ CDS å¼€å‘æœåŠ¡å™¨ï¼ˆå¸¦çƒ­é‡è½½ï¼‰
npm run dev
```

æœåŠ¡å™¨å°†åœ¨ `http://localhost:4004` å¯åŠ¨ï¼ˆå¦‚ç«¯å£è¢«å ç”¨ä¼šè‡ªåŠ¨åˆ‡æ¢ï¼‰ã€‚

åº”ç”¨å…¥å£ï¼š`http://localhost:4004/ai-chat-gui/webapp/index.html`

### 9.3 å¯ç”¨çš„ npm è„šæœ¬

| å‘½ä»¤ | æè¿° |
|-----|------|
| `npm run dev` | å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ |
| `npm run start` | ç”Ÿäº§æ¨¡å¼å¯åŠ¨ |
| `npm run build` | æ„å»º MTA åŒ… |
| `npm run deploy` | éƒ¨ç½²åˆ° Cloud Foundry |
| `npm run undeploy` | ä» Cloud Foundry å¸è½½ |
| `npm run watch-ai-chat-gui` | å¯åŠ¨ cds watchï¼ˆç¦ç”¨ livereloadï¼Œä»ä¼šå¯åŠ¨åç«¯ï¼‰ |

### 9.4 è°ƒè¯•æŠ€å·§

1. **æŸ¥çœ‹ CDS æ—¥å¿—**: ç»ˆç«¯ä¼šè¾“å‡ºè¯¦ç»†çš„è¯·æ±‚æ—¥å¿—
2. **æŸ¥çœ‹ AI è°ƒç”¨æ—¥å¿—**: `[AI]` å‰ç¼€çš„æ—¥å¿—æ˜¾ç¤º AI æœåŠ¡è°ƒç”¨æƒ…å†µ
3. **æµè§ˆå™¨å¼€å‘è€…å·¥å…·**: æŸ¥çœ‹ç½‘ç»œè¯·æ±‚å’Œ SSE äº‹ä»¶æµ

---

## 10. API æ¥å£æ–‡æ¡£

### 10.1 æµå¼èŠå¤©æ¥å£

**æ¥å£**: `POST /api/chat/stream`

**æè¿°**: å‘é€æ¶ˆæ¯ç»™ AI åŠ©æ‰‹ï¼Œæ¥æ”¶æµå¼å“åº”

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
```

**è¯·æ±‚ä½“**:
```json
{
    "message": "string (å¿…éœ€) - ç”¨æˆ·æ¶ˆæ¯å†…å®¹",
    "aiType": "string (å¯é€‰) - AI åŠ©æ‰‹ç±»å‹ï¼Œé»˜è®¤ abap-clean-core",
    "sessionId": "string (å¯é€‰) - ä¼šè¯ ID",
    "messages": "array (å¯é€‰) - å†å²æ¶ˆæ¯æ•°ç»„",
    "sessionInfo": {
        "createdAt": "string - ä¼šè¯åˆ›å»ºæ—¶é—´",
        "roundCount": "number - å½“å‰è½®æ¬¡"
    },
    "sessionFileIds": "array (å¯é€‰) - ä¼šè¯æ–‡ä»¶ ID åˆ—è¡¨"
}
```

**æ”¯æŒçš„ aiType å€¼**:
- `abap-clean-core`
- `cpi`
- `func-doc`
- `tech-doc`
- `code-review`
- `unit-test`
- `diagram`

**å“åº”**: `text/event-stream` (SSE)

```
data: {"text": "AI å“åº”æ–‡æœ¬ç‰‡æ®µ", "sessionId": "æ–°çš„ä¼šè¯ID"}

data: {"text": "ç»§ç»­å“åº”..."}

data: [DONE]
```

**é”™è¯¯å“åº”**:
```
data: {"error": "é”™è¯¯ä¿¡æ¯"}
```

### 10.2 CDS OData æœåŠ¡

**æœåŠ¡è·¯å¾„**: `/api/chat`

**å¯ç”¨æ“ä½œ**:
- `sendMessage(message, sessionId)`: å‘é€æ¶ˆæ¯ï¼ˆéæµå¼ï¼Œå¤‡ç”¨ï¼‰

---

## 11. å›½é™…åŒ–æ”¯æŒ

### 11.1 æ”¯æŒçš„è¯­è¨€

| è¯­è¨€ | æ–‡ä»¶ | åŒºåŸŸè®¾ç½® |
|-----|------|---------|
| è‹±æ–‡ï¼ˆé»˜è®¤ï¼‰ | `i18n.properties` | `en` |
| è‹±æ–‡ | `i18n_en.properties` | `en` |
| ç®€ä½“ä¸­æ–‡ | `i18n_zh_CN.properties` | `zh_CN` |

### 11.2 æ·»åŠ æ–°è¯­è¨€

1. åœ¨ `app/ai-chat-gui/webapp/i18n/` ç›®å½•åˆ›å»ºæ–°æ–‡ä»¶
2. å‘½åæ ¼å¼: `i18n_{locale}.properties`
3. åœ¨ `manifest.json` çš„ `supportedLocales` ä¸­æ·»åŠ æ–°è¯­è¨€

### 11.3 å…³é”® i18n é”®

| é”®å | æè¿° |
|-----|------|
| `appTitle` | åº”ç”¨æ ‡é¢˜ |
| `welcomeTitle_{aiType}` | å„ AI åŠ©æ‰‹çš„æ¬¢è¿æ ‡é¢˜ |
| `welcomeMessage_{aiType}` | å„ AI åŠ©æ‰‹çš„æ¬¢è¿æ¶ˆæ¯ |
| `aiAssistantsCategory` | AI åŠ©æ‰‹åˆ†ç±»æ ‡é¢˜ |
| `toolsCategory` | å·¥å…·åˆ†ç±»æ ‡é¢˜ |

---

## 12. å®‰å…¨é…ç½®

### 12.1 è®¤è¯æ–¹å¼

- **æœ¬åœ°å¼€å‘**: æ— è®¤è¯ï¼ˆæ–¹ä¾¿è°ƒè¯•ï¼‰
- **äº‘ç«¯éƒ¨ç½²**: XSUAA OAuth2 è®¤è¯

### 12.2 æˆæƒæ¨¡å‹

**è§’è‰²æ¨¡æ¿**:
- `User`: åŸºç¡€ç”¨æˆ·è§’è‰²

**è§’è‰²é›†åˆ**:
- `AIChat_User`: åº”ç”¨ç”¨æˆ·è§’è‰²é›†åˆ

### 12.3 API å®‰å…¨

- AI API å¯†é’¥å­˜å‚¨åœ¨ç¯å¢ƒå˜é‡ä¸­
- åç«¯ä½œä¸ºä»£ç†ï¼Œå‰ç«¯ä¸ç›´æ¥æš´éœ² API å¯†é’¥
- CORS é…ç½®é™åˆ¶è·¨åŸŸè¯·æ±‚

---

## 13. å¸¸è§é—®é¢˜

### Q1: å¯åŠ¨æ—¶æç¤ºç«¯å£è¢«å ç”¨ï¼Ÿ

**A**: åº”ç”¨ä¼šè‡ªåŠ¨å°è¯•ä¸‹ä¸€ä¸ªå¯ç”¨ç«¯å£ã€‚æ£€æŸ¥ç»ˆç«¯è¾“å‡ºï¼Œä¼šæ˜¾ç¤ºå®é™…ä½¿ç”¨çš„ç«¯å£å·ã€‚

### Q2: AI å“åº”ä¸ºç©ºæˆ–æŠ¥é”™ï¼Ÿ

**A**: 
1. æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„ API Key æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤å¯¹åº” AI ç±»å‹çš„ App ID å·²é…ç½®
3. æŸ¥çœ‹ç»ˆç«¯æ—¥å¿—äº†è§£è¯¦ç»†é”™è¯¯ä¿¡æ¯

### Q3: å¦‚ä½•æ·»åŠ æ–°çš„ AI åŠ©æ‰‹ï¼Ÿ

**A**:
1. åœ¨é˜¿é‡Œäº‘ç™¾ç‚¼åˆ›å»ºæ–°åº”ç”¨ï¼Œè·å– App ID
2. åœ¨ `.env` ä¸­æ·»åŠ æ–°çš„ç¯å¢ƒå˜é‡
3. åœ¨ `server.js` çš„ `AI_APP_ID_MAP` ä¸­æ·»åŠ æ˜ å°„
4. åœ¨ `Home.view.xml` ä¸­æ·»åŠ æ–°çš„ç£è´´
5. åœ¨ i18n æ–‡ä»¶ä¸­æ·»åŠ å¯¹åº”çš„æ ‡é¢˜å’Œæè¿°

### Q4: æµç¨‹å›¾ä¸èƒ½æ­£ç¡®æ¸²æŸ“ï¼Ÿ

**A**:
1. æ£€æŸ¥ Mermaid è¯­æ³•æ˜¯å¦æ­£ç¡®
2. ä½¿ç”¨ã€Œä¿®å¤è¾“å‡ºæ ¼å¼ã€æŒ‰é’®å°è¯•è‡ªåŠ¨ä¿®å¤
3. æ‰‹åŠ¨ç¼–è¾‘ Mermaid ä»£ç åç‚¹å‡»ã€Œæ¸²æŸ“ã€

### Q5: å¦‚ä½•è‡ªå®šä¹‰æ ·å¼ï¼Ÿ

**A**: ç¼–è¾‘ `app/ai-chat-gui/webapp/css/style.css` æ–‡ä»¶ï¼Œæ ·å¼ä¼šè‡ªåŠ¨åº”ç”¨ã€‚

### Q6: å¯¹è¯å†å²ä¸¢å¤±ï¼Ÿ

**A**: å¯¹è¯å†å²å­˜å‚¨åœ¨æµè§ˆå™¨ localStorage ä¸­ï¼š
- æ¸…é™¤æµè§ˆå™¨æ•°æ®ä¼šä¸¢å¤±å†å²
- æœ€å¤šä¿å­˜ 100 æ¡å¯¹è¯
- ä¸åŒæµè§ˆå™¨/è®¾å¤‡é—´ä¸å…±äº«

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.4.3 (2025-01)
- æ–°å¢æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼ˆæ”¯æŒ PDFã€Wordã€Excel ç­‰ï¼‰
- å®Œå–„é¡¹ç›®æ–‡æ¡£
- ä¼˜åŒ–ä¼šè¯ç®¡ç†ç­–ç•¥
- å¢å¼ºæµç¨‹å›¾ç”ŸæˆåŠŸèƒ½

### v1.4.0
- æ–°å¢æµç¨‹å›¾ç”ŸæˆåŠŸèƒ½ (Diagram Helper)
- æ”¯æŒ Draw.io ç¼–è¾‘å™¨é›†æˆ
- ä¼˜åŒ–ç”¨æˆ·ç•Œé¢

### v1.3.0
- æ–°å¢å¤š AI åŠ©æ‰‹æ”¯æŒ
- å®ç° Launchpad é£æ ¼é¦–é¡µ
- æ·»åŠ å›½é™…åŒ–æ”¯æŒ

### v1.2.0
- å®ç°æµå¼å“åº” (SSE)
- æ·»åŠ ä¼šè¯ç®¡ç†
- ä¼˜åŒ– Markdown æ¸²æŸ“

### v1.1.0
- åˆå§‹ç‰ˆæœ¬
- åŸºç¡€èŠå¤©åŠŸèƒ½
- SAP BTP éƒ¨ç½²æ”¯æŒ

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»é¡¹ç›®ç»´æŠ¤è€…ã€‚

---

*æœ¬æ–‡æ¡£æœ€åæ›´æ–°äº 2025å¹´1æœˆ12æ—¥*
